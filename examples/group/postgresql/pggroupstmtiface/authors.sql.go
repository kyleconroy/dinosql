// Code generated by sqlc. DO NOT EDIT.
// source: authors.sql

package pggroupstmtiface

import (
	"context"
	"database/sql"
)

type Authors interface {
	Create(ctx context.Context, name string) (Author, error)
	PrepareCreate(ctx context.Context) (AuthorsCreateStmt, error)
	Get(ctx context.Context, authorID int32) (Author, error)
	PrepareGet(ctx context.Context) (AuthorsGetStmt, error)
}

func NewAuthors(db DBTX) Authors {
	return &authors{db: db}
}

type authors struct {
	db DBTX
}

const authorsCreate = `-- name: Create :one
INSERT INTO authors (name) VALUES ($1)
RETURNING author_id, name
`

func (q *authors) Create(ctx context.Context, name string) (Author, error) {
	row := q.db.QueryRowContext(ctx, authorsCreate, name)
	var i Author
	err := row.Scan(&i.AuthorID, &i.Name)
	return i, err
}

type AuthorsCreateStmt interface {
	Close() error
	JoinTx(ctx context.Context, tx *sql.Tx) AuthorsCreateStmt
	Exec(ctx context.Context, name string) (Author, error)
}

type authorsCreateStmt struct {
	stmt *sql.Stmt
}

func (s *authorsCreateStmt) Close() error {
	return s.stmt.Close()
}

func (s *authorsCreateStmt) JoinTx(ctx context.Context, tx *sql.Tx) AuthorsCreateStmt {
	stmt := tx.StmtContext(ctx, s.stmt)
	return &authorsCreateStmt{stmt: stmt}
}

func (s *authorsCreateStmt) Exec(ctx context.Context, name string) (Author, error) {
	row := s.stmt.QueryRowContext(ctx, name)
	var i Author
	err := row.Scan(&i.AuthorID, &i.Name)
	return i, err
}

func (q *authors) PrepareCreate(ctx context.Context) (AuthorsCreateStmt, error) {
	stmt, err := q.db.PrepareContext(ctx, authorsCreate)
	if err != nil {
		return nil, err
	}
	return &authorsCreateStmt{stmt: stmt}, nil
}

const authorsGet = `-- name: Get :one
SELECT author_id, name FROM authors
WHERE author_id = $1
`

func (q *authors) Get(ctx context.Context, authorID int32) (Author, error) {
	row := q.db.QueryRowContext(ctx, authorsGet, authorID)
	var i Author
	err := row.Scan(&i.AuthorID, &i.Name)
	return i, err
}

type AuthorsGetStmt interface {
	Close() error
	JoinTx(ctx context.Context, tx *sql.Tx) AuthorsGetStmt
	Exec(ctx context.Context, authorID int32) (Author, error)
}

type authorsGetStmt struct {
	stmt *sql.Stmt
}

func (s *authorsGetStmt) Close() error {
	return s.stmt.Close()
}

func (s *authorsGetStmt) JoinTx(ctx context.Context, tx *sql.Tx) AuthorsGetStmt {
	stmt := tx.StmtContext(ctx, s.stmt)
	return &authorsGetStmt{stmt: stmt}
}

func (s *authorsGetStmt) Exec(ctx context.Context, authorID int32) (Author, error) {
	row := s.stmt.QueryRowContext(ctx, authorID)
	var i Author
	err := row.Scan(&i.AuthorID, &i.Name)
	return i, err
}

func (q *authors) PrepareGet(ctx context.Context) (AuthorsGetStmt, error) {
	stmt, err := q.db.PrepareContext(ctx, authorsGet)
	if err != nil {
		return nil, err
	}
	return &authorsGetStmt{stmt: stmt}, nil
}
