# .semaphore/production-deploy.yml
version: v1.0
name: Deploy to Equinox
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Release dinoSQL for Linux
    task:
      jobs:
        - name: Build and release
          commands:
            - checkout
            - sem-version go 1.12
            - go build ./cmd/dinosql
  - name: Release dinoSQL for macOS
    task:
      agent:
        machine:
          type: a1-standard-4
          os_image: macos-mojave
      jobs:
        - name: Build and release
          commands:
            - checkout
            - brew install go@1.12
            - go build ./cmd/dinosql
